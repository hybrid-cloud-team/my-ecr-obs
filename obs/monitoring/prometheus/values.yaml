# ======================================================
# 1. Prometheus Operator
#   - admission webhook 완전 비활성화 (RBAC 재생성 차단)
# ======================================================
prometheusOperator:
  enabled: true

  admissionWebhooks:
    enabled: false
    patch:
      enabled: false
    certManager:
      enabled: false

  tls:
    enabled: false


# ======================================================
# 2. Prometheus
# ======================================================
prometheus:
  ingress:
    enabled: true
    ingressClassName: alb
    annotations:
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}]'
      alb.ingress.kubernetes.io/healthcheck-path: /-/healthy
      alb.ingress.kubernetes.io/success-codes: '200,302'
    hosts:
      - ""
    paths:
      - /
    pathType: Prefix

  prometheusSpec:
    externalLabels:
      cluster: "eks-cluster"
    retention: 2d

    thanos:
      image: quay.io/thanos/thanos:v0.31.0
      version: v0.31.0


# ======================================================
# 3. Alertmanager
# ======================================================
alertmanager:
  enabled: true

  ingress:
    enabled: true
    ingressClassName: alb
    annotations:
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}]'
      alb.ingress.kubernetes.io/healthcheck-path: /-/healthy
      alb.ingress.kubernetes.io/success-codes: '200'
    hosts:
      - ""
    paths:
      - /
    pathType: Prefix

  alertmanagerSpec:
    externalUrl: "http://k8s-monitoringalbgrou-9a6446449e-137211545.us-east-1.elb.amazonaws.com/alertmanager"
    routePrefix: /
